//CREATE//
create database library;

create table BOOK(ID int AUTO_INCREMENT PRIMARY KEY,
    -> TITLE varchar(100) not null,
    -> COPIES int not null,
    -> AVERENGE_READING_TIME TIME not null);
	
create table AUTHORS(BOOK_ID int not null,
    -> NAME varchar(100) not null);
	
create table USER(ID int AUTO_INCREMENT PRIMARY KEY,
    -> ROLE_ID int not null,
    -> NAME varchar(100) not null,
    -> EMAIL varchar(100) not null,
    -> PASSWORD CHAR(82) not null,
    -> REGISTRATION_DATE DATE not null,
    -> BIRTHDAY_DATE DATE not null);
	
create table ROLE(ID int AUTO_INCREMENT PRIMARY KEY,
    -> NAME varchar(100) not null);
	
create table JOURNAL(ID int AUTO_INCREMENT PRIMARY KEY,
    -> USER_ID int not null,
    -> BOOK_ID int not null,
    -> DATE_OF_RENT date not null,
    -> EXPECTED_RETURN_DATE date not null,
    -> IS_BOOK_RETURNED tinyint not null);



//INSERT//
insert into book(TITLE, COPIES, AVERENGE_READING_TIME) values ('Da Vinci Code,The', 20, '03:00:00');
insert into book(TITLE, COPIES, AVERENGE_READING_TIME) values ('Harry Potter and the Deathly Hallows', 30,'5:00:00');
insert into book(TITLE, COPIES, AVERENGE_READING_TIME) values ('Harry Potter and the Philosopher\'s Stone', 40, '4:00:00');
insert into book(TITLE, COPIES, AVERENGE_READING_TIME) values ('Harry Potter and the Order of the Phoenix', 5, '10:00:00');
insert into book(TITLE, COPIES, AVERENGE_READING_TIME) values ('Fifty Shades of Grey', 0, '11:00:00');

insert into authors(BOOK_ID, NAME) values (1, 'Brown, Dan');
insert into authors(BOOK_ID, NAME) values (1, 'Milton, Ben');
insert into authors(BOOK_ID, NAME) values (2, 'Rowling, J.K.');
insert into authors(BOOK_ID, NAME) values (3, 'Rowling, J.K.');
insert into authors(BOOK_ID, NAME) values (4, 'Rowling, J.K.');
insert into authors(BOOK_ID, NAME) values (5, 'James, E. L.');

insert into role(NAME) values ('USER');
insert into role(NAME) values ('MANAGER');

insert into user(ROLE_ID, NAME, EMAIL, PASSWORD, REGISTRATION_DATE, BIRTHDAY_DATE) values (1, 'Jonh Weak', 'email@google.com', 'xxxxxx', '2012-12-31', '1980-05-02');

insert into journal(USER_ID, BOOK_ID, DATE_OF_RENT, EXPECTED_RETURN_DATE, IS_BOOK_RETURNED) values (1, 3, '2013-02-01', '2013-03-01', 0);

//SELECT//

1.	Get information about all books
select * from book;

2.	Check if needed book is available
select COPIES>1 from book where TITLE={book name}; if available return 1, else 0

3.	Find books by author (main author, co-author)
select book.*, authors.NAME as AUTHOR from book join authors on book.ID=authors.BOOK_ID where authors.NAME={author};

4.	Find book by title
select * from book where TITLE={book name};

















